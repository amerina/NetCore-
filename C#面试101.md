[TOC]

面试心态：平常心、平常心

### 1、个人介绍

- 个性（比如偏安静的个性但是又能和同事和善的沟通）
- 做事风格（注重质量、代码质量高、善于整体思考）
- 最大优势（owner意识、执行力、工程把控能力）
- 工作经历简述（在每个公司的工作负责什么、贡献了什么、收获了什么）
- 为什么要离职

### 2、工作单元与事务有什么区别?

工作单元是一种模式，工作单元是ABP用来发起、管理和处理数据库连接和事务的主要系统。工作单元系统是通过环境上下文模式(Ambient Context pattern)设计的。这意味着当我们创建一个新的工作单元时，它创建了一个作用域上下文，通过共享相同的上下文，在当前作用域内执行的所有数据库操作都参与了这个上下文，并将其视为单个事务边界。在工作单元中执行的所有操作都会一起提交(成功时)或回滚(异常时)。



### 3、Filter筛选器了解吗?







### Middleware中间件了解吗？

### Entityframwork了解吗？

### AOP了解吗？

### 网关API Gateway是否了解？

系统拆分为微服务后，内部的微服务间是互联互通的，相互之间的访问都是点对点的。如果外部系统想调用系统的某个功能，也采取点对点的方式，则外部系统会非常"头大"。因为在外部系统看来，它不需要也没办法理解这么多微服务的职责分工和边界，它只会关注它需要的能力，而不会关注这个能力由哪个微服务提供。

除此以外，外部系统访问系统还涉及安全和权限相关的控制，如果外部系统直接访问某个微服务，则意味着每个微服务都要自己实现安全和权限的功能，这样做不但工作量大，而且都是重复工作。

综合上面的分析，微服务需要一个统一的API网关，负责外部系统的访问操作。

API网关是外部系统访问的接口，所有的外部系统接入系统都需要通过API网关，主要包括接入鉴权(是否允许接入)、权限控制(可以访问哪些功能)、传输加密、请求路由、流量控制等功能。



**API 网关职责**

API 网关需要承担包括但不限于下面的这些职责：

1.请求路由，版本控制

API Gateway 是微服务的入口，可以根据不同的请求路由到不同的服务上，也可以在 Gateway 上进行路由的版本控制，这样即使后服务发生了变化，Gateway 的路径依然可以不改变。

2.用户登录，权限认证

客户端在与我们后端服务进行交互之前，需要先进行登录鉴权操作，这是后端所有的服务都需要有的共有逻辑，因此在 Gateway 做这个事情就再合适不过。

3.数据聚合-API组合

由于不同的客户端往往需要的数据完全不同，而这些数据又是不同的 service 提供的，比如上面提到的查看一个商品详情页，我们可能需要同时从商品服务，库存服务，评价服务等中拉取信息，我们可以借助 Gateway 方便完成来自不同 service 的数据聚合。

4.协议转换

在我们的实践中，CS（Client to Server）协议和SS（Server to Server）协议是不一样的，为了保证数据传输的可靠性，我们的CS协议会有鉴权以及加密解密的逻辑，而在内部的SS协议则不需要这些逻辑，因此在 Gateway 我们需要有一个协议转换的过程。

5.熔断，降级，限流

当监测到某个服务发生异常，或者当服务的流量超过我们服务的承载能力等情况时，我们可以采取相应的措施，对整个系统的容错性、稳定性有很大帮助。

6.负载均衡

API 网关知道所有服务实例的地址，所以可以根据不同服务采取不同的负载均衡策略。

7.灰度发布

有时候我不希望让所有的流量都一次性的到达程序的新版本，因为那个新版本也许并没有测试地很充分。灰度发布允许你直接只导入指定量的流量到新的版本，API 网关就可以帮你来做这件事情。你可以配置10%的请求到新的版本，然后一旦你确保了新版本没有bug，你可以把流量切换到100%。

NetCore一般通过Ocelot实现网关



参考：

[通过 Ocelot 实现 API 网关 | Microsoft Learn](https://learn.microsoft.com/zh-cn/dotnet/architecture/microservices/multi-container-microservice-net-applications/implement-api-gateways-with-ocelot)

[Ocelot+Consul实现微服务架构 - Crazier - 博客园 (cnblogs.com)](https://www.cnblogs.com/tx720/p/13634914.html)

### Ocelot了解吗?

Ocelot是一个使用.NET Core平台上的一个API Gateway，这个项目的目标是在.NET上面运行微服务架构。

它功能强大，包括了：路由、请求聚合、服务发现、认证、鉴权、限流熔断、并内置了负载均衡器与Service Fabric、Butterfly Tracing集成，还引入了Polly来进行故障处理。

Polly是一种.NET弹性和瞬态故障处理库，允许我们以非常顺畅和线程安全的方式来执诸如行重试，断路，超时，故障恢复等策略。

### Consul了解吗?

Consul是HashiCorp公司推出的开源工具，用于实现分布式系统的服务发现与配置，内置了服务注册与发现框架、分布一致性协议实现、健康检查、Key/Value存储、多数据中心方案、在Ocelot已经支持简单的负载功能，也就是当下游服务存在多个结点的时候，Ocelot能够承担起负载均衡的作用。但是它不提供健康检查，服务的注册也只能通过手动在配置文件里面添加完成。这不够灵活并且在一定程度下会有风险。这个时候我们就可以用Consul来做服务发现并实现健康检查。

### Nosql数据库用过哪些?

### Redis常用命令是什么?

### Grpc了解吗?

### 函数式编程了解吗?

### 中间件都用过哪些?

Redis、RabbitMQ、ZooKeeper

### 为什么要离职？

### 详细讲下你现在的项目？你在其中担当怎样的角色?

### 你在项目中主要负责的部分是哪些？具体描述一下

### 什么是微服务?为什么使用微服务?

### 前后端分离架构了解吗?

前后端分离的目的是什么:核心目标是前后端工作互不干扰并行开发

**前后端分离：**

前端：负责View（视图层/做HTML页面的展示）和Controller（逻辑层/书写业务逻辑）层。

后端：负责Model（数据层/数据的增删改查）层。

 

在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果，用户看到什么样的效果，从后端请求的数据如何加载到前端中，都由前端自己决定，后端仅仅需要提供一套逻辑对外提供数据即可，并且前端与后端的耦合度相对较低，**在这种模式中，我们通常将后端开发的每个视图都成为一个接口，或者API，前端通过访问接口来对数据进行增删改查。**

![前后端分离](Image\前后端分离.png)

**分离与不分离并没有技术上的难度，关键在于工程的取舍**

### 什么是RESTful架构?

Restful是一种架构设计风格，提供了设计原则和约束条件，而不是架构，而满足这些约束条件和原则的应用程序或设计就是 Restful架构或服务。

如果一个架构符合REST原则，就称它为RESTful架构。

GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源

- 每一个URI代表一种资源；
- 客户端和服务器之间，传递这种资源的某种表现层；
- 客户端通过四个HTTP动词，对服务器端资源进行操作，实现"表现层状态转化"



主要的设计原则：

-  资源与URI
-  统一资源接口(HTTP方法如GET，PUT和POST)
-  资源的表述
-  资源的链接
-  状态的转移

总之，RESTful的核心就是后端将资源发布为URI，前端通过URI访问资源，并通过HTTP动词表示要对资源进行的操作。

参考：

[理解RESTful架构](http://www.ruanyifeng.com/blog/2011/09/restful.html)

[What is RESTful programming? - Stack Overflow](https://stackoverflow.com/questions/671118/what-is-restful-programming)
